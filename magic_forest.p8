pico-8 cartridge // http://www.pico-8.com
version 43
__lua__
-- main

function _init()
 init_player()
end

function _draw()
	cls()
	
	map()
	move_player(player)
	draw_player()
end



-->8
-- init objects

-- create a player
function init_player()
	player = {
		x = 9,
		y = 9
		}
end
-->8
-- movment logic

-- tilemap collision check
function collide(o)
	local x1=o.x/8
	local y1=o.y/8
	local x2=(o.x+4)/8
	local y2=(o.y+4)/8
	
	local a=fget(mget(x1,y1),0)
	local b=fget(mget(x1,y2),0)
	local c=fget(mget(x2,y1),0)
	local d=fget(mget(x2,y2),0)

	if a or b or c or d then 
		return true
	else
		return false
	end
end

-- move player
function move_player(player)
	local lx=player.x
	local ly=player.y
	
	if (btn(0)) player.x-=1
	if (btn(1)) player.x+=1
	if (btn(2)) player.y-=1
	if (btn(3)) player.y+=1

	if collide(player) then
		player.x=lx
		player.y=ly
	end
end
-->8
-- draw to screen

-- draw player sprite
function draw_player()
	spr(9,player.x, player.y)
end

__gfx__
000000003333333344444449ccccccccfaffaffa333333333333a33355555555cc9999cc00100000000000000000000000000000000000000000000000000000
00000000333b333344444444cccccc6caffaffaf3338b333a33933a359999995c999999c01110000000000000000000000000000000000000000000000000000
00700700333333b344494444c6ccccccffaffaff33bbbb333a3a3a335944649599999a9911111000000000000000000000000000000000000000000000000000
00077000b333333344444944cccc6cccfaffaffa3bbbb8b339393a33599aa9959aaaaba906f6000a000000000000000000000000000000000000000000000000
000770003333b33344444444ccccccccaffaffaf3b8bbbb339393933594a449599a99a99afffa050000000000000000000000000000000000000000000000000
007007003333333349444444ccccccccffaffaff33b44b33393a39395944449599999999ad8da500000000000000000000000000000000000000000000000000
000000003333333344449444cc6cccc6faffaffa333443333939393a59444495c999999c0ddd0000000000000000000000000000000000000000000000000000
0000000033b3333344444444ccccccccaffaffaf333333333939393a55555555cc9999cc0d0d0000000000000000000000000000000000000000000000000000
__gff__
0000000101010001000000000000000000000000010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0404040404040404040404040404040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0402070303030303020202020202020400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0402020303030301020506060606020400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0401020103030301020601060601020400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0401020106030301020606060606020400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0401020101010601020202020202020400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0401020105010101020101010201010400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0401020202020202020101010201010400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0401010501010202050101010201010400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0406010101010102050101010201030400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0401030303030302010501010201030400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0403030303030302010505010201030400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0403030303020202020202010201030400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0401030303010101010102020201030400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0401010101010101010101010101080400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040404040404040404040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
